{% extends "base.html.twig" %}

{% block title %}Spielorte{% endblock %}

{% block content %}
    <h4 class="pt-3">
        {{ venue.name }}
        {% if currentClown.isAdmin %}
            {{ include('_shared/_edit_link.html.twig', {url: path('venue_edit', {id: venue.id}), title: "bearbeiten"}) }}
        {% endif %}
    </h4>

    {{ include('venue/_details_navigation.html.twig', {venue: venue, show: 'details'}) }}

    <table class="table">
        <tbody>
            <tr>
                <th>Offizieller Name</th>
                <td>{{ venue.officialName }}</td>
            </tr>
            <tr>
                <th>Adresse</th>
                <td>
                     {{ venue.streetAndNumber }}, {{ venue.postalCode }} {{ venue.city }}
                </td>
            </tr>
            <tr>
                <th>Ansprechperson</th>
                <td>
                    {{ venue.contactPerson }}
                </td>
            </tr>
            <tr>
                <th>Email</th>
                <td>
                    {{ venue.contactEmail }}
                </td>
            </tr>
            <tr>
                <th>Telefon</th>
                <td>
                    {{ venue.contactPhone }}
                </td>
            </tr>
            <tr title="Bei der Spielplanerstellung wird versucht als ersten Clown einen verantwortlichen Clown zuzuordnen">
                <th>Verantwortliche Clowns</th>
                <td>
                    {{ venue.responsibleClowns|map(clown => clown.name)|join(' | ') }}
                </td>
            </tr>
            <tr title="Bei der Spielplanerstellung wird ein gesperrter Clown niemals diesem Spielort zugeordnet">
                <th>Gesperrte Clowns</th>
                <td>
                    {{ venue.blockedClowns|map(clown => clown.name)|join(' | ') }}
                </td>
            </tr>
            <tr>
                <th>Standard Tageszeit f√ºr Spieltermine</th>
                <td>
                    {{ venue.daytimeDefault|trans }}
                </td>
            </tr>
            <tr>
                <th>Treffen</th>
                <td>
                    {{ venue.meetingTime|date('H:i') }}
                </td>
            </tr>
            <tr>
                <th>Spielzeit</th>
                <td>
                    {{ venue.playTimeFrom|date('H:i') }} - {{ venue.playTimeTo|date('H:i') }}
                </td>
            </tr>
            <tr>
                <th>Bemerkungen</th>
                <td>
                    {{ venue.comments|nl2br }}
                </td>
            </tr>
            {% if venue.isSuper %}
                <tr>
                    <td colspan="2">ist ein Super-Spielort!</td>
                </tr>
            {% endif %}
            <tr>
                <th>Link mit weiteren Infos</th>
                <td>
                     <a target="_blank" href="{{ venue.url }}">{{ venue.url }}</href>
                </td>
            </tr>
        </tbody>
    </table>
    
    {{ include('venue/_year_navigation.html.twig', {venue: venue, years: years, activeYear: activeYear}) }}
    
    <h5>Spieltermine {{ venue.name }} {{ activeYear }}</h5>

    <div class="container">
        <div class="row">
    {% for playDate in playDates %}
            <div class="col-6 col-md-3 col-lg-2">
            {{ playDate.date|date("d.m.Y") }} 
            {% if currentClown.isAdmin %}
                {{ include('_shared/_edit_link.html.twig', {url: path('play_date_edit', {id: playDate.id, venue_id: venue.id}), title: "Termin bearbeiten"}) }}
            {% endif %}
            </div>
    {% endfor %}
        </div>
    </div>
    {% if currentClown.isAdmin %}
        <div class="container pt-3">
            {{ include('_shared/_create_link.html.twig', {url: path('play_date_new', {venue_id: venue.id}), label: "Spieltermin anlegen"}) }}
        </div>
    {% endif %}    
{% endblock %}
