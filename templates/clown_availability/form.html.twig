{% extends "base.html.twig" %}

{% block title %}Fehlzeiten {{ clown.name }}{% endblock %}

{% block content %}
    {{ component('month_navigation', { active: month.key, urlKey: 'clown_availability_show', urlParams: {clownId: clown.id} }) }}
    <h4 class="pt-3">Fehlzeiten {{ clown.name }} {{ month.label }}</h4>

    {{ form_start(form) }}
        {{ form_rest(form) }}
        
        <button type="button" class="btn btn-info mb-3 collapse show play_dates" data-bs-target=".play_dates" data-bs-toggle="collapse">Spieltermine anzeigen</button>
        <button type="button" class="btn btn-info mb-3 collapse play_dates" data-bs-target=".play_dates" data-bs-toggle="collapse">Spieltermine verstecken</button>
        
        <div class="container">
            {% for day in schedule.days %}
                <div class="row">
                    {{ include ('partials/schedule_day_number_and_name.html.twig', {day: day}, with_context = false) }}
                    
                    <div class="col-sm-5 border">
                        <div class="text-muted">vormittags</div>
                        <div class="form-check form-check-inline">
                            <input {{ day.entries('am', 'availabilities')[0] == 'yes' ? 'checked="checked"' : '' }} class="form-check-input" type="radio" name="availability[{{ day.dateString }}][am]" id="availability_{{ day.dateString }}_am_yes" value="yes">
                            <label class="form-check-label" for="availability_{{ day.dateString }}_am_yes">Ja</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input {{ day.entries('am', 'availabilities')[0] == 'maybe' ? 'checked="checked"' : '' }} class="form-check-input" type="radio" name="availability[{{ day.dateString }}][am]" id="availability_{{ day.dateString }}_am_maybe" value="maybe">
                            <label class="form-check-label" for="availability_{{ day.dateString }}_am_maybe">Wenn's sein muss</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input {{ day.entries('am', 'availabilities')[0] == 'no' ? 'checked="checked"' : '' }} class="form-check-input" type="radio" name="availability[{{ day.dateString }}][am]" id="availability_{{ day.dateString }}_am_no" value="no">
                            <label class="form-check-label" for="availability_{{ day.dateString }}_am_no">Nein</label>
                        </div>

                        <div class="play_dates collapse">
                            {% for playDate in day.entries('am', 'playDates') %}
                                {{ include ('play_date/show_in_schedule.html.twig', {playDate: playDate}) }}
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-sm-5 border">
                        <div class="text-muted">nachmittags</div>
                        <div class="form-check form-check-inline">
                            <input {{ day.entries('pm', 'availabilities')[0] == 'yes' ? 'checked="checked"' : '' }} class="form-check-input" type="radio" name="availability[{{ day.dateString }}][pm]" id="availability_{{ day.dateString }}_pm_yes" value="yes">
                            <label class="form-check-label" for="availability_{{ day.dateString }}_pm_yes">Ja</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input {{ day.entries('pm', 'availabilities')[0] == 'maybe' ? 'checked="checked"' : '' }} class="form-check-input" type="radio" name="availability[{{ day.dateString }}][pm]" id="availability_{{ day.dateString }}_pm_maybe" value="maybe">
                            <label class="form-check-label" for="availability_{{ day.dateString }}_pm_maybe">Wenn's sein muss</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input {{ day.entries('pm', 'availabilities')[0] == 'no' ? 'checked="checked"' : '' }} class="form-check-input" type="radio" name="availability[{{ day.dateString }}][pm]" id="availability_{{ day.dateString }}_pm_no" value="no">
                            <label class="form-check-label" for="availability_{{ day.dateString }}_pm_no">Nein</label>
                        </div>

                        <div class="play_dates collapse">
                            {% for playDate in day.entries('pm', 'playDates') %}
                                {{ include ('play_date/show_in_schedule.html.twig', {playDate: playDate}) }}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <button type="submit" class="mt-3 btn btn-primary">Speichern</button>
    {{ form_end(form) }}
{% endblock %}
